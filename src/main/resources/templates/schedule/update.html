<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout">
<th:block layout:fragment="content">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <br>
  <div class="container">
      <form action="/schedule/update" method="post">
          <div class="row">
              <div class="col-4">
                  <div class="row-cols-4">
                      이미지 들어갈 자리
                  </div>
                  <div class="row-cols-2">
                    <input id="file-upload" type="file" name="files" multiple="multiple"/>
                  </div>
              </div>
              <div class="col-8">
                  <div class="row g-3">
                      <div class="col-12">
                          <label for="title" class="form-label">일정 제목</label>
                          <input th:value="${scheduleDTO.scheduleTitle}" name="scheduleTitle" type="text" class="form-control" id="title" th:required="true">
                      </div>
                      <div class="col-12">
                          <label for="address" class="form-label">장소</label>
                          <input th:value="${scheduleDTO.schedulePlace}" name="schedulePlace" type="text" class="form-control" id="address" th:required="true">
                      </div>
                      <div class="col-12">
                          <label for="datetime" class="form-label">날짜/시간</label>
                          <input th:value="${scheduleStartDate}" name="dateTime" type="datetime-local" class="form-control" id="datetime" th:required="true">
                      </div>
                      <div class="col-12">
                          <label for="max" class="form-label">정원</label>
                          <input th:value="${scheduleDTO.scheduleMax}" name="scheduleMax" type="number" class="form-control" id="max" min="1" th:max="${countMembers}" th:required="true">
                      </div>
                  </div>
              </div>
          </div>
          <div class="row">
              <label for="content" class="form-label">내용</label>
              <textarea th:text="${scheduleDTO.scheduleContent}" name="scheduleContent" style="width: 100%; height: 400px; resize: none" class="form-control" id="content"></textarea>
          </div>
            <button style="float: right; margin-top: 10px;" type="submit" class="btn btn-success update">수정</button>
            <button type="button" class="btn btn-dark" th:onclick="history.back()">취소</button>
      </form>
  </div>
</th:block>
<script layout:fragment="script" th:inline="javascript">

    /*<![CDATA[*/
    var message = /*[[${message}]]*/ null;
    if (message) {
        alert(message);
    }
    /*]]>*/
    function setMinDateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');

        const datetimeLocal = `${year}-${month}-${day}T${hours}:${minutes}`;
        document.getElementById('datetime').setAttribute('min', datetimeLocal);
    }

    document.addEventListener('DOMContentLoaded', setMinDateTime);
</script>