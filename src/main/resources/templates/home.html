<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout.html"
>

<th:block layout:fragment="content">


  <div class="container">
    <!-- 로그인한 사용자에게만 보이는 부분 -->
    <div class="row" th:if="${user?.userNickname}">
      <br>
      <div class="col" style="float: left">
        <p th:text="${user?.userNickname} ? ${#strings.concat(user.userNickname, ' 님 환영합니다')} : ''"></p>
      </div>
      <div class="col"></div>
      <div class="col" style="text-align: right">
        <button class="btn btn-primary" th:unless="${#authentication.name == 'anonymousUser'}"
                th:onclick="|location.href='@{/club/create}'|">새 모임 생성
        </button>
      </div>

    </div>

    <div class="row">
      <br>
    </div>

  </div>

  <hr>



  <div class="container">

    <div class="row">
      <h2>나의 모임</h2>
    </div>
    <div class="row" th:if="${myClubDTOList!=null && myClubDTOList.size()>0}"
         th:with="myMaxIndex=${#lists.size(myClubDTOList) - 1}">

      <div class="col-4" th:each="i : ${#numbers.sequence(0, myMaxIndex)}">

        <div class="col-6 photo-wrap" style="float: left;">

          <img class="photo" th:if="${#strings.contains(myClubPhotoList[i], 'ClubDefaultPhoto')}"
               src="/assets/ClubDefaultPhoto.jpg">

          <img class="photo" th:unless="${#strings.contains(myClubPhotoList[i], 'ClubDefaultPhoto')}"
               th:src="@{/view/{photo}(photo=${myClubPhotoList[i]})}">

        </div>


        <div class="col-6" style="max-width: 200px; max-height: 200px; float: left">
          <div>
            <a th:href="@{/club/main/{clubNo}(clubNo = ${myClubDTOList[i].clubNo})}"
               th:inline="text">
              <h3 style="text-align: center" class="card-title" th:text="${myClubDTOList[i].clubName}"></h3>
            </a>

            <p class="card-text" style="text-align: center; max-height: 50px; overflow: hidden" th:text="${myClubDTOList[i].clubContent}"></p>
          </div>
        </div>

      </div>
    </div>


    <br>
  </div>

  <div class="container">

    <div class="row">
      <h2>전체 모임</h2>
    </div>

    <div class="row" th:if="${ clubDTOList.size()>0}" th:with="maxIndex=${#lists.size(clubDTOList) - 1}">

      <div class="col-4" th:each="i : ${#numbers.sequence(0, maxIndex)}">

        <div class="col-6 photo-wrap" style="float: left;">
          <img th:if="${#strings.contains(clubPhotoList[i], 'ClubDefaultPhoto')}" class="photo"
               src="/assets/ClubDefaultPhoto.jpg">

          <img th:unless="${#strings.contains(clubPhotoList[i], 'Default')}" class="photo"
               th:src="@{/view/{photo}(photo=${clubPhotoList[i]})}">

        </div>

        <div class="col-6" style="max-width: 200px; max-height: 200px;  float: left">
          <div>
            <a th:href="@{/club/main/{clubNo}(clubNo = ${clubDTOList[i].clubNo})}" th:inline="text">
              <h3 style="text-align: center" class="card-title" th:text="${clubDTOList[i].clubName}"></h3>
            </a>
            <p class="card-text" style="text-align: center; max-height: 50px; overflow: hidden" th:text="${clubDTOList[i].clubContent}"></p>
          </div>
        </div>
      </div>

    </div>

    <br>
  </div>
  <div id="deactivatecheck" th:text="${state}"></div>
  <script th:inline="javascript">
    window.onload = function() {
      const statecheck = document.querySelector("#deactivatecheck").textContent;

      if (statecheck.includes('1')) {
        alert("정지된 아이디입니다. 관리자에게서 문의하세요" );
        submitLogoutForm();
        window.location.replace("user/login")
      }
    }

    function submitLogoutForm() {
      // Create a form element
      const form = document.createElement("form");
      form.method = "POST";
      form.action = "@{/user/logout}";

      document.body.appendChild(form);
      form.submit();
    }
  </script>





  <!--    <div class="row-cols-auto">-->

  <!--        <div th:if="${ clubDTOList.size()>0}" th:with="maxIndex=${#lists.size(clubDTOList) - 1}">-->
  <!--            <div th:each="i : ${#numbers.sequence(0, maxIndex)}">-->
  <!--                <div class="card mb-3" style="max-width: 415px;">-->
  <!--                    <div class="row g-0">-->

  <!--                        <div class="col-md-4">-->

  <!--                            <img th:if="${#strings.contains(clubPhotoList[i], 'ClubDefaultPhoto')}" class="card-img-top"-->
  <!--                                 src="/assets/ClubDefaultPhoto.jpg">-->

  <!--                            <img th:unless="${#strings.contains(clubPhotoList[i], 'Default')}" class="card-img-top"-->
  <!--                                 th:src="@{/view/{photo}(photo=${clubPhotoList[i]})}">-->

  <!--                        </div>-->

  <!--                        <div class="col-md-8">-->
  <!--                            <div class="card-body">-->
  <!--                                <a th:href="@{/club/main/{clubNo}(clubNo = ${clubDTOList[i].clubNo})}" th:inline="text">-->
  <!--                                    <h3 class="card-title" th:text="${clubDTOList[i].clubName}"></h3>-->
  <!--                                </a>-->
  <!--                                <p th:text="${clubDTOList[i].clubContent}"></p>-->
  <!--                            </div>-->
  <!--                        </div>-->

  <!--                    </div>-->
  <!--                </div>-->
  <!--            </div>-->
  <!--        </div>-->
  <!--    </div>-->






  <!--        <div class="col"></div>-->
  <!--        <div class="col"></div>-->

  <!--        <div class="col">01-->
  <!--            <div class="box" style="width: 100px; height: 100px; background-color: red">-->
  <!--                box-->
  <!--            </div>-->
  <!--        </div>-->
  <!--        <div class="col">02-->
  <!--            <div class="box" style="width: 100px; height: 100px; background-color: peru">-->
  <!--                box-->
  <!--            </div>-->
  <!--        </div>-->
  <!--        <div class="col">03-->
  <!--            <div class="box" style="width: 100px; height: 100px; background-color: aqua">-->
  <!--                box-->
  <!--            </div>-->
  <!--        </div>-->
  <!--        <div class="col">04-->
  <!--            <div class="box" style="width: 100px; height: 100px; background-color: bisque">-->
  <!--                box-->
  <!--            </div>-->
  <!--        </div>-->
  <!--        <div class="col"></div>-->
  <!--        <div class="col"></div>-->


  <!--    <h2>나의 모임</h2>-->
  <!--    <div class="row row-cols-3">-->

  <!--        <div th:if="${myClubDTOList!=null && myClubDTOList.size()>0}"-->
  <!--             th:with="myMaxIndex=${#lists.size(myClubDTOList) - 1}">-->
  <!--            <div>-->

  <!--                <div class="col" th:each="i : ${#numbers.sequence(0, myMaxIndex)}">-->
  <!--                    <div>-->


  <!--                        <div>-->

  <!--                            <img th:if="${#strings.contains(myClubPhotoList[i], 'ClubDefaultPhoto')}"-->
  <!--                                 src="/assets/ClubDefaultPhoto.jpg">-->

  <!--                            <img th:unless="${#strings.contains(myClubPhotoList[i], 'ClubDefaultPhoto')}"-->
  <!--                                 th:src="@{/view/{photo}(photo=${myClubPhotoList[i]})}">-->

  <!--                        </div>-->


  <!--                        <div>-->
  <!--                            <div class="card-body">-->
  <!--                                <a th:href="@{/club/main/{clubNo}(clubNo = ${myClubDTOList[i].clubNo})}"-->
  <!--                                   th:inline="text">-->
  <!--                                    <h3 class="card-title" th:text="${myClubDTOList[i].clubName}"></h3>-->
  <!--                                </a>-->
  <!--                                <p class="card-text" th:text="${myClubDTOList[i].clubContent}"></p>-->
  <!--                            </div>-->
  <!--                        </div>-->

  <!--                    </div>-->
  <!--                </div>-->
  <!--            </div>-->
  <!--        </div>-->
  <!--    </div>-->

</th:block>